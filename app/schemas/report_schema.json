{
  "$defs": {
    "Citation": {
      "additionalProperties": false,
      "properties": {
        "chunk_id": {
          "title": "Chunk Id",
          "type": "string"
        },
        "snippet": {
          "title": "Snippet",
          "type": "string"
        },
        "source_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Source Id"
        },
        "doc_id": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Doc Id"
        },
        "start_char": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Start Char"
        },
        "end_char": {
          "anyOf": [
            {
              "minimum": 0,
              "type": "integer"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "End Char"
        },
        "evidence_recovered_by": {
          "anyOf": [
            {
              "enum": [
                "llm",
                "supplement_rule",
                "targeted_retrieval",
                "deterministic"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Evidence Recovered By"
        },
        "retrieval_score": {
          "anyOf": [
            {
              "type": "number"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Retrieval Score"
        }
      },
      "required": [
        "chunk_id",
        "snippet"
      ],
      "title": "Citation",
      "type": "object"
    },
    "Finding": {
      "additionalProperties": false,
      "properties": {
        "check_id": {
          "title": "Check Id",
          "type": "string"
        },
        "area": {
          "title": "Area",
          "type": "string"
        },
        "title": {
          "title": "Title",
          "type": "string"
        },
        "severity": {
          "enum": [
            "low",
            "medium",
            "high",
            "critical"
          ],
          "title": "Severity",
          "type": "string"
        },
        "evidence_status": {
          "enum": [
            "present",
            "not_provided_in_sources",
            "explicitly_missing",
            "not_assessed"
          ],
          "title": "Evidence Status",
          "type": "string"
        },
        "retrieval_status": {
          "anyOf": [
            {
              "enum": [
                "MENTIONED_EXPLICIT",
                "MENTIONED_IMPLICIT",
                "MENTIONED_AMBIGUOUS",
                "NOT_FOUND_IN_RETRIEVED",
                "NOT_RETRIEVED"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Retrieval Status"
        },
        "needs_confirmation": {
          "default": false,
          "title": "Needs Confirmation",
          "type": "boolean"
        },
        "is_threshold_prompt": {
          "default": false,
          "title": "Is Threshold Prompt",
          "type": "boolean"
        },
        "stage_reason": {
          "title": "Stage Reason",
          "type": "string"
        },
        "evidence": {
          "items": {
            "$ref": "#/$defs/Citation"
          },
          "title": "Evidence",
          "type": "array"
        },
        "subchecks": {
          "items": {
            "$ref": "#/$defs/Subcheck"
          },
          "title": "Subchecks",
          "type": "array"
        },
        "actions": {
          "items": {
            "type": "string"
          },
          "title": "Actions",
          "type": "array"
        },
        "owner": {
          "default": "TBD / assign (e.g., HR/People, Finance, Ops)",
          "title": "Owner",
          "type": "string"
        },
        "metrics": {
          "items": {
            "$ref": "#/$defs/MetricItem"
          },
          "title": "Metrics",
          "type": "array"
        },
        "questions": {
          "items": {
            "type": "string"
          },
          "title": "Questions",
          "type": "array"
        }
      },
      "required": [
        "check_id",
        "area",
        "title",
        "severity",
        "evidence_status",
        "stage_reason"
      ],
      "title": "Finding",
      "type": "object"
    },
    "FunctionalScorecardItem": {
      "additionalProperties": false,
      "properties": {
        "functional_area": {
          "title": "Functional Area",
          "type": "string"
        },
        "maturity_level": {
          "enum": [
            "Under-Developed",
            "Developing",
            "Aligned",
            "Strategic"
          ],
          "title": "Maturity Level",
          "type": "string"
        },
        "impact_level": {
          "enum": [
            "Limited",
            "Moderate",
            "Significant"
          ],
          "title": "Impact Level",
          "type": "string"
        },
        "rationale": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Rationale"
        }
      },
      "required": [
        "functional_area",
        "maturity_level",
        "impact_level"
      ],
      "title": "FunctionalScorecardItem",
      "type": "object"
    },
    "GuidanceReference": {
      "additionalProperties": false,
      "properties": {
        "title": {
          "title": "Title",
          "type": "string"
        },
        "url": {
          "title": "Url",
          "type": "string"
        },
        "published_date": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Published Date"
        }
      },
      "required": [
        "title",
        "url"
      ],
      "title": "GuidanceReference",
      "type": "object"
    },
    "MetricItem": {
      "additionalProperties": false,
      "properties": {
        "metric": {
          "title": "Metric",
          "type": "string"
        },
        "value": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Value"
        },
        "status": {
          "enum": [
            "found",
            "unknown"
          ],
          "title": "Status",
          "type": "string"
        },
        "evidence": {
          "items": {
            "$ref": "#/$defs/Citation"
          },
          "title": "Evidence",
          "type": "array"
        }
      },
      "required": [
        "metric",
        "status"
      ],
      "title": "MetricItem",
      "type": "object"
    },
    "RiskItem": {
      "additionalProperties": false,
      "properties": {
        "category": {
          "title": "Category",
          "type": "string"
        },
        "severity": {
          "enum": [
            "low",
            "medium",
            "high",
            "critical"
          ],
          "title": "Severity",
          "type": "string"
        },
        "statement": {
          "title": "Statement",
          "type": "string"
        },
        "evidence": {
          "items": {
            "$ref": "#/$defs/Citation"
          },
          "title": "Evidence",
          "type": "array"
        },
        "mitigation": {
          "items": {
            "type": "string"
          },
          "title": "Mitigation",
          "type": "array"
        },
        "legal_note": {
          "default": "This is not legal advice; consider reviewing with counsel.",
          "title": "Legal Note",
          "type": "string"
        }
      },
      "required": [
        "category",
        "severity",
        "statement"
      ],
      "title": "RiskItem",
      "type": "object"
    },
    "StageBasedRecommendation": {
      "additionalProperties": false,
      "properties": {
        "size_stage": {
          "title": "Size Stage",
          "type": "string"
        },
        "funding_stage": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Funding Stage"
        },
        "hr_structure_recommendation": {
          "title": "Hr Structure Recommendation",
          "type": "string"
        },
        "recommended_practices": {
          "items": {
            "type": "string"
          },
          "title": "Recommended Practices",
          "type": "array"
        },
        "potential_risks": {
          "items": {
            "type": "string"
          },
          "title": "Potential Risks",
          "type": "array"
        },
        "sources": {
          "items": {
            "$ref": "#/$defs/GuidanceReference"
          },
          "title": "Sources",
          "type": "array"
        }
      },
      "required": [
        "size_stage",
        "hr_structure_recommendation"
      ],
      "title": "StageBasedRecommendation",
      "type": "object"
    },
    "Subcheck": {
      "additionalProperties": false,
      "properties": {
        "capability_key": {
          "title": "Capability Key",
          "type": "string"
        },
        "evidence_status": {
          "enum": [
            "present",
            "not_provided_in_sources",
            "explicitly_missing",
            "not_assessed"
          ],
          "title": "Evidence Status",
          "type": "string"
        },
        "retrieval_status": {
          "anyOf": [
            {
              "enum": [
                "MENTIONED_EXPLICIT",
                "MENTIONED_IMPLICIT",
                "MENTIONED_AMBIGUOUS",
                "NOT_FOUND_IN_RETRIEVED",
                "NOT_RETRIEVED"
              ],
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Retrieval Status"
        },
        "citations": {
          "items": {
            "$ref": "#/$defs/Citation"
          },
          "title": "Citations",
          "type": "array"
        },
        "missing_reason": {
          "anyOf": [
            {
              "type": "string"
            },
            {
              "type": "null"
            }
          ],
          "default": null,
          "title": "Missing Reason"
        }
      },
      "required": [
        "capability_key",
        "evidence_status"
      ],
      "title": "Subcheck",
      "type": "object"
    }
  },
  "additionalProperties": false,
  "properties": {
    "stage": {
      "title": "Stage",
      "type": "string"
    },
    "size_stage": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Size Stage"
    },
    "funding_stage": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Funding Stage"
    },
    "company_stage": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Company Stage"
    },
    "drivers": {
      "items": {
        "type": "string"
      },
      "title": "Drivers",
      "type": "array"
    },
    "functional_scorecard": {
      "items": {
        "$ref": "#/$defs/FunctionalScorecardItem"
      },
      "title": "Functional Scorecard",
      "type": "array"
    },
    "stage_based_recommendation": {
      "anyOf": [
        {
          "$ref": "#/$defs/StageBasedRecommendation"
        },
        {
          "type": "null"
        }
      ],
      "default": null
    },
    "profile_expectations": {
      "items": {
        "$ref": "#/$defs/Finding"
      },
      "title": "Profile Expectations",
      "type": "array"
    },
    "additional_observations": {
      "items": {
        "$ref": "#/$defs/Finding"
      },
      "title": "Additional Observations",
      "type": "array"
    },
    "top_growth_areas": {
      "items": {
        "$ref": "#/$defs/Finding"
      },
      "title": "Top Growth Areas",
      "type": "array"
    },
    "risks": {
      "items": {
        "$ref": "#/$defs/RiskItem"
      },
      "title": "Risks",
      "type": "array"
    },
    "methodology_summary": {
      "items": {
        "type": "string"
      },
      "title": "Methodology Summary",
      "type": "array"
    },
    "data_limitations": {
      "items": {
        "type": "string"
      },
      "title": "Data Limitations",
      "type": "array"
    },
    "follow_up_questions": {
      "items": {
        "type": "string"
      },
      "title": "Follow Up Questions",
      "type": "array"
    },
    "unknowns": {
      "items": {
        "type": "string"
      },
      "title": "Unknowns",
      "type": "array"
    },
    "reviewed_sources": {
      "items": {
        "type": "string"
      },
      "title": "Reviewed Sources",
      "type": "array"
    },
    "coverage_summary": {
      "additionalProperties": true,
      "title": "Coverage Summary",
      "type": "object"
    },
    "retrieval_summary": {
      "additionalProperties": true,
      "title": "Retrieval Summary",
      "type": "object"
    },
    "stage_note": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Stage Note"
    },
    "coverage_note": {
      "anyOf": [
        {
          "type": "string"
        },
        {
          "type": "null"
        }
      ],
      "default": null,
      "title": "Coverage Note"
    },
    "disclaimer": {
      "default": "This is not legal advice; consider reviewing with counsel.",
      "title": "Disclaimer",
      "type": "string"
    }
  },
  "required": [
    "stage"
  ],
  "title": "FinalReport",
  "type": "object"
}
